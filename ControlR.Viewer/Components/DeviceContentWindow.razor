@using System.Diagnostics
@using System.Runtime.InteropServices
@using System.Text
@using System.Runtime.InteropServices.JavaScript;
@using ControlR.Viewer.Components;

<div class="device-content @($"{WindowState}".ToLower())">
    <div class="title-bar p-2">
        <div class="title-description">
            <MudText Typo="Typo.h6" Color="MudBlazor.Color.Primary">
                @(ContentInstance.Device?.Name) - @(ContentInstance.ContentTypeName)
            </MudText>
        </div>
        <div class="text-end" style="white-space: nowrap">
            @if (WindowState != WindowState.Minimized)
            {
                <MudTooltip Text="Minimize">
                    <MudIconButton Icon="@(Icons.Material.Filled.Minimize)"
                                   Class="mr-1"
                                   OnClick="@(() => SetWindowState(WindowState.Minimized))" />
                </MudTooltip>
            }

            @if (WindowState != WindowState.Restored)
            {
                <MudTooltip Text="Restore">
                    <MudIconButton Icon="@(Icons.Material.Filled.FullscreenExit)"
                                   Class="mr-1"
                                   OnClick="@(() => SetWindowState(WindowState.Restored))" />
                </MudTooltip>
            }

            @if (WindowState != WindowState.Maximized)
            {
                <MudTooltip Text="Maximize">
                    <MudIconButton Icon="@(Icons.Material.Filled.Fullscreen)"
                                   Class="mr-1"
                                   OnClick="@(() => SetWindowState(WindowState.Maximized))" />
                </MudTooltip>
            }

            <MudTooltip Text="Close">
                <MudIconButton Icon="@(Icons.Material.Filled.Close)"
                               OnClick="Close" />
            </MudTooltip>
        </div>
    </div>
    <div class="content-area">
        <CascadingValue Value="this">
            <CascadingValue Value="ContentInstance">
                @(ContentInstance.Content)
            </CascadingValue>
        </CascadingValue>
    </div>
</div>